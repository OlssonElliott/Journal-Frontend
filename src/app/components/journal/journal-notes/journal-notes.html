<button type="button" (click)="logout()">Logga ut</button>

<form (ngSubmit)="submitForm()">
  <input type="radio" name="emotionalState" id="bra" value="Bra" [(ngModel)]="emotionalState" />
  <label for="bra">Bra</label>

  <input type="radio" name="emotionalState" id="sadar" value="Sådär" [(ngModel)]="emotionalState" />
  <label for="sadar">Sådär</label>

  <input
    type="radio"
    name="emotionalState"
    id="daligt"
    value="Dåligt"
    [(ngModel)]="emotionalState"
  />
  <label for="daligt">Dåligt</label>

  <input
    type="radio"
    name="emotionalState"
    id="vet_ej"
    value="Vet ej"
    [(ngModel)]="emotionalState"
  />
  <label for="vet_ej">Vet ej</label>

  <br /><br />

  <input type="text" [(ngModel)]="journalEntry" name="journalEntry" />
  <button type="submit" [disabled]="loading">Submit</button>
</form>

<section>
  <h3>Filtrera efter datum</h3>
  <label>
    Från
    <input type="date" [(ngModel)]="filterStart" (change)="applyDateFilter()" />
  </label>
  <label>
    Till
    <input type="date" [(ngModel)]="filterEnd" (change)="applyDateFilter()" />
  </label>
  <button type="button" (click)="clearFilter()">Rensa filter</button>
</section>

@if (stats.length) {
  <section>
    <h3>Statistik för vald period</h3>
    <table>
      <thead>
        <tr>
          <th>Känsla</th>
          <th>Antal</th>
          <th>Andel</th>
        </tr>
      </thead>
      <tbody>
        @for (stat of stats; track stat.emotionalState) {
          <tr>
            <td>{{ stat.emotionalState }}</td>
            <td>{{ stat.count }}</td>
            <td>{{ stat.percentage }} %</td>
          </tr>
        }
      </tbody>
    </table>
  </section>
}

<ul>
  @for (item of filteredEntries; track item.id) {
    <li>
      <a [routerLink]="['/journal', item.id]">
        <h3>{{ item.title }}</h3>
      </a>
      <p>{{ item.content }}</p>
      <p>{{ item.createdAt | date: "d MMMM yyyy 'klockan' HH:mm" }}</p>
    </li>
  }
</ul>
